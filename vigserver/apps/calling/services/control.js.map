{"version":3,"sources":["0"],"names":["ServiceBase","require","VAMP","MessageTypes","NormalMessage","MessageType","EventbusMessageType","async","SessionManager","SerialportServiceName","VampToVimp","Vimp2Vamp","CallingControlService","[object Object]","super","init","this","sessionManager","sessionMaxId","sender","sendToDevice","bind","host","roaming","node","subscribe","catch","message","VampMessage","VIGateway","Buffer","isBuffer","logger","debug","_","params","JSON","stringify","from","shortSn","toString","e","error","VIGEventbus","send","to","payload","port","data","isSession","endpoint","sid","getSession","createSession","msg","decode","stack","deviceInfo","sn","gateway","type","waterfall","callback","VIGDevices","findOne","device","saveDeviceToStorage","active","addDevice","err","result","vampMsg","decodeMessage","deviceIsValid","isValid","Answer","Register","warn","RegisterMessage","decodePayload","Attrs","Status","Event","EventMessage","Alarm","AlarmMessage","Notify","NotifyMessage","Action","ActionMessage","Message","Data","Query","AnswerMessage","Heartbeat","flags","qos","QosAnswerMessage","session","next","dispatchMessage","targets","receivers","includes","getDevicetypeNames","length","receiver","getDevice","toLowerCase","module","exports"],"mappings":"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"}