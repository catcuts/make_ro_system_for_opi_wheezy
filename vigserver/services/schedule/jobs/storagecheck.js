/*ã€€China Fujian Huanyutong Technology Co., Ltd. */
const async=require("async");module.exports={cronTime:"* * 23 * * *",onTick:function(){logger.info(_("Running the storage check task.")),async.series([async()=>{for(let e in VIGStorage.documents)try{VIGStorage.documents[e].compact()}catch(a){logger.debug(_("Error while compact storage <{name}>").params(e))}logger.debug(_("Compact storages"))},async()=>{let e=VIGStorage.openDocument("transactions"),a=await e.remove({$not:{status:1}});logger.debug(_("Delete {n} invalid transactions.").params(a))},async()=>{await VIGStorage.reset(),logger.debug(_("Storages is reset."))}],(e,a)=>{e?logger.warn(_("Error while running the storage check task:{message}").params(e.message)):logger.info(_("Storage check task is end."))})}};