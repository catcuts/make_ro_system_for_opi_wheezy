{"version":3,"sources":["0"],"names":["TransferBase","TransferStatus","require","MessageTypes","MessageTopicNames","DeviceEventCodes","MQTT","asyncWait","MQTTTransfer","[object Object]","undefined","this","settings","retaion","qos","dup","topics","_subscribed","domain","host","_deviceTopicRegExp","_groupTopicRegExp","updateTopics","_","params","broker","_rootTopic","_domainTopic","_devicesRootTopic","_hostTopic","sn","_myTopic","_groupsTopic","gpath","group","startsWith","_hostGroupsTopic","_broadcastTopic","_notifyTopic","_attrsTopic","_actionTopic","_messageTopic","_heartbeatTopic","_registerTopic","_dataTopic","_queryTopic","_answerTopic","message","options","topic","type","Attrs","Status","Event","Alarm","to","from","substr","payload","code","AttrsChange","StatusChange","room","length","toLowerCase","channel","address","data","opts","retain","Qos","logger","warn","String","onError","endpoint","publish","e","error","stack","zone","packed","serializeMessage","transfer","callback","subscribe","packet","super","onMessage","msg","deserializeMessage","token","flags","Object","assign","reply","direct","serialize","parity","receipt","sync","__options__","addrs","addr","split","push","includes","childsn","matched","match","hostsn","gmatched","join","debug","onConnected","subscribeTopics","then","catch","err","attrs","unsubscribeTopics","strict","broadcastZones","name","Promise","resolve","reject","authorized","R","keys","unsubscribe","clientId","wsOptions","keepalive","reschedulePings","protocolId","protocolVersion","clean","reconnectPeriod","connectTimeout","incomingStore","outgoingStore","queueQoSZero","store","mqttStore","incoming","outgoing","connect","on","bind","onReconnect","onDisconnected","connected","end","removeAllListeners","reconnect","module","exports"],"mappings":"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"}