{"version":3,"sources":["0"],"names":["ServiceBase","require","TransferEvents","TransferStatus","EventEmiter","EventEmitter","SessionManager","async","MessageTypeNames","Notifys","assert","asyncSleep","VoerkaMessages","VoerkaMessageClient","[object Object]","server","attrs","super","this","eventbus","deviceCaches","transfers","sessionManager","sessionMaxId","session","sessionName","sender","send","bind","loadTransfers","connected","transfer","status","Connected","message","payload","assertReady","VIGateway","mode","_","isWait","options","from","host","sn","__options__","sid","getSession","createSession","id","logger","debug","params","JSON","stringify","groupPath","group","event","HostAttrsChange","onHostChange","HostModeChange","onHostModeChange","HostRestart","triggerEvent","code","VoerkaConsts","DeviceEventCodes","DeviceShutdown","outbound","R","isEmpty","name","transferObj","_disconnect","e","error","stack","off","Message","_receivedMessageFromTransfer","Notify","_notifyMessageFromTransfer","Error","_errorMessageFromTransfer","transferSettings","transInstance","type","warn","on","publishSubjectMessage","toLowerCase","isSession","form","next","dispatchMessage","endpoint","addres","to","split","target","length","device","VIGDevices","getDevice","node","err","notify","callback","_host","value","any","attr","contains","keys","parallel","map","results","setTimeout","refresh","then","catch","_stop","info","_start","isrestarting","init","_connect","clearSessions","devices","Array","isArray","msg","Event","Alarm","StatusChangeEvent","AttrsChangeEvent","Answer","module","exports"],"mappings":"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"}