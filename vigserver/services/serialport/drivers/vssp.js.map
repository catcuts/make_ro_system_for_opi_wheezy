{"version":3,"sources":["0"],"names":["SerialPort","require","SerialportDriverBase","SerialPortError","Struct","Header","Buffer","from","formatVampMessage","calcCheckSum","data","sum","byte","e","logger","warn","_","verifyCheckSum","calcSum","params","CommandTypes","Ready","Reset","Config","Data","AnswerTypes","Answer","CommandMessageStruct","name","type","Value","Byte","VarBuffer","Int16BE","AnswerMessageStruct","UInt16BE","DataCommand","checkSum","encode","cmd","payload","configCommand","value","message","decode","Error","encodeMessage","isBuffer","decodeMessage","toString","AskReadyCommand","alloc","ResetCommand","VSSPSerialportDriver","[object Object]","settings","super","this","_isReceiveBusy","_ReceivedCache","_WaitHandleCache","options","baudRate","delimiter","_lastAnswerCode","_session","status","code","resolve","reject","startSession","setTimeout","waitAnswerTimeout","getLastAnswer","onData","sendQueue","push","packedData","debug","put","error","driver","err","endSession","concat","messages","headerStart","indexOf","length","byteLength","payloadLength","readUInt16BE","packData","slice","port","msg","RangeError","_parseMessage","readInt16BE","readUInt8","module","exports"],"mappings":"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"}