/*ã€€China Fujian Huanyutong Technology Co., Ltd. */
const{WebViewBase:WebViewBase}=require("../webview");class ApiResourceBase extends WebViewBase{settings(){this.router.get("/",this.apiMethod(this.get)).get("/:id/",this.apiMethod(this.get)).post("/",this.apiMethod(this.post)).post("/:id",this.apiMethod(this.post)).delete("/",this.apiMethod(this.delete)).delete("/:id",this.apiMethod(this.delete)).put("/",this.apiMethod(this.put)).put("/:id",this.apiMethod(this.put)).patch("/:id",this.apiMethod(this.put)).head("/:id",this.apiMethod(this.head))}_injectParentResource(e,t,s){let r=new function(){};if("id"in e.params?r.id=e.params.id||"":r.id="",r.name=this.name,e.parentResource){let t=e.parentResource;e.parentResource=r,e.parentResource.parentResource=t}else e.parentResource=r;s()}registerResource(e,t=!1){t?this.router.use("/:id/"+e.name,this._injectParentResource,e.router):this.router.use("/"+e.name,this._injectParentResource,e.router)}getResourceQuery(e){let t={};return t="get"===e.method?{id:e.params.id||"",filter:e.query._filter||"",paging:e.query._paging||!1,pageSize:e.query._pageSize||20,pageNum:e.query._pageNum||1,pageCount:e.query._pageCount||1,sortKey:e.query._sortKey||"",sortOrder:e.query._sortOrder||""}:{id:e.params.id||"",filter:e.body._filter||"",paging:e.body._paging||!1,pageSize:e.body._pageSize||20,pageNum:e.body._pageNum||1,pageCount:e.body._pageCount||1,sortKey:e.body._sortKey||"",sortOrder:e.body._sortOrder||""}}async get(e,t,s){return"id"in e.params?await this.one(e,t,s):await this.list(e,t,s)}async post(e,t,s){return"id"in e.params?await this.create(e,t,s):await this.batchCreate(e,t,s)}async put(e,t,s){return"id"in e.params?await this.update(e,t,s):await this.batchUpdate(e,t,s)}async patch(e,t,s){return"id"in e.params?await this.update(e,t,s):NotSupportedApiResponse()}async delete(e,t,s){return"id"in e.params?await this.destroy(e,t,s):await this.batchDestroy(e,t,s)}async head(e,t,s){return await this.meta(e,t,s)}async list(e,t,s){return NotSupportedApiResponse()}async one(e,t,s,r){return NotSupportedApiResponse()}async create(e,t,s){return NotSupportedApiResponse()}async batchCreate(e,t,s){return NotSupportedApiResponse()}async update(e,t,s){return NotSupportedApiResponse()}async batchUpdate(e,t,s){}async destroy(e,t,s){return NotSupportedApiResponse()}async batchDestroy(e,t,s){return NotSupportedApiResponse()}async meta(e,t,s){return NotSupportedApiResponse()}toString(){return"ApiResource[name]".params(this.name)}}module.exports={ApiResourceBase:ApiResourceBase};