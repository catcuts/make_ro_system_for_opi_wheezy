{"version":3,"sources":["0"],"names":["DeviceTypeBase","require","DeviceProxyBase","Notifys","VoerkaMessages","VIMPErrors","VoerkaConsts","TransactionManager","VIGLoginStatus","Initial","Logining","LoginSuccess","LoginFail","VIGatewayProxy","[object Object]","sn","devicetype","super","this","loginStatus","timeZone","attrs","secret","port","group","roaming","roamingGroup","domain","mode","value","parseInt","Error","_","node","notify","HostModeChange","logger","warn","params","debug","level","String","isHost","VIGPlatform","load","shortSn","substr","mqtt","broker","username","gateway","session","vmc","createSession","_loginfunc","async","ready","result","send","Register","from","resumeAttrs","handleLogin","e","message","setTimeout","end","process","nextTick","payload","code","updateStatus","noticeUpdateDeviceAttrs","HostRegistered","undefined","type","MessageTypes","Answer","JSON","stringify","login","curVer","parseFloat","version","upgradeParams","Object","assign","compatible","versions","models","date","delay","force","url","ParamError","trim","length","tobj","findOne","status","isComplete","VMErrors","FailError","abort","create","source","hostMonitor","VIGServices","getServices","id","upgrade","addNode","actor","trigger","progress","triggerEvent","DeviceEventCodes","DeviceTransaction","tid","VIGHost","init","VIGateway","proxyObj","loadByQuery","__host__","update","loadRemainDevices","devices","host","reset","broadcastNotify","HostAttrsChange","event","VMCConnected","Event","Ready","DeviceStatusChange","HostStatusChange","DeviceChildrenAuthorize","onActionUpgrade","MessageAnswer","OK","VIServer","module","exports"],"mappings":"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"}