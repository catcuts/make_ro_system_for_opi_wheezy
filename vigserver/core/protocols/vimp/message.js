/*ã€€China Fujian Huanyutong Technology Co., Ltd. */
const{MessageTypes:MessageTypes,DeviceEventCodes:DeviceEventCodes}=require("./constants");function VoerkaMessage({from:e="",to:s="",type:a=0,tid:t=0,payload:o={},sid:r=0,token:n="",flags:l={},...g}={}){let y={type:a,from:e,to:s,timestamp:(new Date).getTime(),payload:o,...g};return r>0&&(y.sid=r),t>0&&(y.tid=t),n&&(y.token=n),R.isEmpty(l)||(y.flags=l),y}function RegisterMessage({attrs:e={},...s}={}){return VoerkaMessage({type:MessageTypes.Register,payload:e,...s})}function AttrsMessage({operate:e="update",name:s="",value:a="",oldValue:t="",forValue:o="",attrs:r={},...n}={}){let l={};return"_batch_"in r?l=r:(l={name:s,value:a},"update"!==e&&(l.operate=e),t&&(l.oldValue=t),o&&(l.for=o)),VoerkaMessage({type:MessageTypes.Attrs,payload:l,...n})}function EventMessage({code:e=0,source:s="",level:a=3,message:t="",location:o={},payload:r={},...n}={}){let l={code:e,level:a,...r};return t&&(l.message=t),s&&(l.source=s),R.isEmpty(o)||(l.location=o),VoerkaMessage({type:MessageTypes.Event,payload:l,...n})}function ActionMessage({name:e="",actionflags:s={},payload:a={},...t}={}){let o={action:e,...a};return R.isEmpty(s)||(o.flags=s),VoerkaMessage({type:MessageTypes.Action,payload:o,...t})}function QueryMessage({type:e="attrs",flags:s={},fields:a=[],payload:t={},...o}={}){let r={type:e,fields:a,...t};return R.isEmpty(s)||(r.flags=s),VoerkaMessage({type:MessageTypes.Query,payload:r,...o})}function NotifyMessage({code:e=0,level:s=3,message:a="",source:t="",url:o="",choices:r=[],payload:n={},...l}={}){let g={code:e,level:s,...n};return o&&(g.url=o),t&&(g.source=t),a&&(g.message=a),r.length>0&&(g.choices=r),VoerkaMessage({type:MessageTypes.Notify,payload:g,...l})}function AttrsChangeEventMessage({attrs:e={},source:s="",location:a={},level:t=3,message:o="",payload:r={},...n}){let l={code:DeviceEventCodes.AttrsChange,level:t,attrs:e,...r};return o&&(l.message=o),s&&(l.source=s),R.isEmpty(a)||(l.location=a),VoerkaMessage({type:MessageTypes.Event,payload:l,...n})}function StatusChangeEventMessage({status:e={},source:s="",location:a={},level:t=3,message:o="",payload:r={},...n}){let l={code:DeviceEventCodes.StatusChange,level:t,status:e,...r};return o&&(l.message=o),s&&(l.source=s),R.isEmpty(a)||(msg.payload.location=a),VoerkaMessage({type:MessageTypes.Event,payload:l,...n})}function AlarmMessage({code:e=0,source:s="",level:a=3,message:t="",location:o={},payload:r={},...n}={}){let l={code:e,level:a,...r};return t&&(l.message=t),s&&(l.source=s),R.isEmpty(o)||(l.location=o),VoerkaMessage({type:MessageTypes.Alarm,payload:l,...n})}function AnswerMessage({code:e=200,message:s="",payload:a={},...t}={}){let o={code:e,message:s,...a};return VoerkaMessage({type:MessageTypes.Answer,payload:o,...t})}function HeartbeatMessage({from:e="",count:s=0}={}){let a={count:s};return VoerkaMessage({type:MessageTypes.Heartbeat,payload:a})}module.exports={Request:VoerkaMessage,Answer:AnswerMessage,Attrs:AttrsMessage,Notify:NotifyMessage,Action:ActionMessage,Alarm:AlarmMessage,Heartbeat:HeartbeatMessage,Register:RegisterMessage,Query:QueryMessage,Event:EventMessage,AttrsChangeEvent:AttrsChangeEventMessage,StatusChangeEvent:StatusChangeEventMessage};