/*ã€€China Fujian Huanyutong Technology Co., Ltd. */
const LRU=require("lru-cache"),deepExtend=require("deep-extend"),DEFAULT_CACHE_OPTIONS={max:1e3,maxAge:36e5};class CacheOject{constructor(e){this.options=e,this.cache=null,this.init()}init(){}set(e,c){}get(e){}remove(e){}clear(){}}class LRUCacheObject{init(){this.cache=new LRU(this.options)}set(e,c,t){this.cache.set(e,c,t)}get(e){this.cache.get(e)}remove(e){this.cache.del(e)}has(e){return this.cache.has(e)}clear(){this.cache.reset()}}class CacheManager{constructor(){this.caches={},this.createCaches()}createCaches(){for(let e of VIGateway.attrs.caches||[]){let c={};deepExtend(c,DEFAULT_CACHE_OPTIONS),deepExtend(c,e);try{c.type,this.caches[c.name.toLowerCase()]=new LRUCacheObject(c)}catch(e){logger.error(_("Error while create <{name}> cache : {message}").params(c.name,e.stack))}}}get(e){return 0===arguments.length?this.caches[0]:this.caches[e]}}let cacheManager=new CacheManager;module.exports=cacheManager;