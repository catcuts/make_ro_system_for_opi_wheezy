/*ã€€China Fujian Huanyutong Technology Co., Ltd. */
const{VIGModuleManager:VIGModuleManager}=require("core/vigmodule"),path=require("path"),fs=require("fs");class ServiceManager extends VIGModuleManager{constructor(e){super(e),this.moduleType="service",this.storageName="services",this.storagePrimaryKey="name"}get services(){return this.modules}async registerService(e,r=!1){assert(e instanceof ServiceBase),await this.registerModule(e,r)}getServices(e){return this.getModuleByName(e)}getModuleClass(e){let r=e.entry;if(void 0===r){let s=path.join(VIGConsts.VIGRootFolder,"services",e.name.toLowerCase()+".js");fs.existsSync(s)?r=s:(s=path.join(VIGConsts.VIGRootFolder,"services",e.name.toLowerCase(),"service.js"),fs.existsSync(s)?r=s:logger.warn(_("{module} {name} does not specify entry").params(this.moduleType.firstUpper(),e.name)))}return require(r)}async reloadService(e){await super.reloadModule(e)}}module.exports=ServiceManager;